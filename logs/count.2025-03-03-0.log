2025-03-03 16:52:15.233 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 16:52:15.273 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 16:52:15.591 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 16:52:15.599 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 16:52:15.599 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - The following 1 profile is active: "dev"
2025-03-03 16:52:15.877 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-03 16:52:15.878 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-03 16:52:15.890 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-03-03 16:52:15.996 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=69ab8cb7-b690-3c4b-b80c-208a3dc683e1
2025-03-03 16:52:16.147 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.178 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.179 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.181 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.181 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$721/0x00000238a150c530] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.182 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.185 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.186 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 16:52:16.306 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8090 (http)
2025-03-03 16:52:16.311 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-03 16:52:16.311 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-03-03 16:52:16.365 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-03 16:52:16.365 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 758 ms
2025-03-03 16:52:16.418 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-03-03 16:52:16.611 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-03 16:52:16.923 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountCommentLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountCommentLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:16.923 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countCommentLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-03-03 16:52:17.068 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-03-03 16:52:17.109 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_count_CommentLikeUnlikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentLikeUnlikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.109 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countCommentLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-03-03 16:52:17.133 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.133 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFans2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-03-03 16:52:17.161 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.161 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFansConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2025-03-03 16:52:17.189 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.189 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowing2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_5
2025-03-03 16:52:17.213 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.213 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowingConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_6
2025-03-03 16:52:17.236 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_child_comment_totalCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.236 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteChildCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_7
2025-03-03 16:52:17.264 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.264 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollect2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_8
2025-03-03 16:52:17.287 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.287 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollectConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_9
2025-03-03 16:52:17.311 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.312 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_10
2025-03-03 16:52:17.336 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.336 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_11
2025-03-03 16:52:17.362 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.362 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_12
2025-03-03 16:52:17.384 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_NoteOperateTopic', namespace='', nameServer='127.0.0.1:9876', topic='NoteOperateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 16:52:17.384 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNotePublishConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_13
2025-03-03 16:52:17.387 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_1] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895755651829727273,"type":1}, tags: publishNote
2025-03-03 16:52:17.387 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_2] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895756189493362701,"type":1}, tags: publishNote
2025-03-03 16:52:17.387 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_3] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895791181581779002,"type":1}, tags: publishNote
2025-03-03 16:52:17.387 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_4] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895793656292442205,"type":1}, tags: publishNote
2025-03-03 16:52:17.567 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:17.567 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:17.567 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:17.567 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:17.710 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:17.710 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:17.710 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:17.710 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:17.723 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:17.728 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:17.735 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:17.741 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:17.857 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8090 (http) with context path ''
2025-03-03 16:52:17.860 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 16:52:17.860 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-03-03 16:52:17.860 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-03-03 16:52:17.861 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-03-03 16:52:17.874 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-03-03 16:52:17.874 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-03-03 16:52:17.874 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-03-03 16:52:17.877 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-03-03 16:52:17.877 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-03-03 16:52:17.878 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-03-03 16:52:17.884 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 75886f06-0c40-45c1-8760-6e82ee2b47c8
2025-03-03 16:52:17.896 [main] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-03-03 16:52:17.896 [main] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-03-03 16:52:17.896 [main] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-03-03 16:52:17.898 [main] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-03-03 16:52:17.904 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-03-03 16:52:18.321 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 4
2025-03-03 16:52:18.322 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895794954152706000,\"commentId\":40003,\"level\":1,\"parentId\":1895794954152706000}]","[{\"noteId\":1895792506252034000,\"commentId\":40001,\"level\":1,\"parentId\":1895792506252034000}]","[{\"noteId\":1895795420446064600,\"commentId\":40002,\"level\":1,\"parentId\":1895795420446064600}]","[{\"noteId\":1895795185766367284,\"commentId\":40004,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 16:52:18.332 [pool-batch-consume-blocking-queue-thread-0] ERROR c.g.p.c.impl.BatchConsumeBlockingQueueTrigger - Ops.
org.springframework.data.redis.RedisSystemException: Error in execution
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:52)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:50)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:40)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:38)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:248)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:961)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:818)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:125)
	at org.springframework.data.redis.connection.lettuce.LettuceHashCommands.hIncrBy(LettuceHashCommands.java:150)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.hIncrBy(DefaultedRedisConnection.java:1395)
	at org.springframework.data.redis.core.DefaultHashOperations.lambda$increment$2(DefaultHashOperations.java:69)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultHashOperations.increment(DefaultHashOperations.java:69)
	at com.quanxiaoha.xiaohashu.count.biz.consumer.CountNoteCommentConsumer.consumeMessage(CountNoteCommentConsumer.java:90)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doConsume(BatchConsumeBlockingQueueTrigger.java:143)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$doBatchConsumer$4(BatchConsumeBlockingQueueTrigger.java:132)
	at com.github.phantomthief.util.MoreLocks.lambda$wrapAsRunnable$2(MoreLocks.java:229)
	at com.github.phantomthief.util.MoreLocks.supplyWithLock(MoreLocks.java:49)
	at com.github.phantomthief.util.MoreLocks.runWithLock(MoreLocks.java:32)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doBatchConsumer(BatchConsumeBlockingQueueTrigger.java:110)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$new$0(BatchConsumeBlockingQueueTrigger.java:61)
	at com.github.phantomthief.concurrent.MoreFutures.lambda$scheduleWithDynamicDelay$2(MoreFutures.java:349)
	at com.github.phantomthief.concurrent.MoreFutures$ScheduledTaskImpl.run(MoreFutures.java:449)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisCommandExecutionException: ERR hash value is not an integer
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:747)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:682)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:599)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_5] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895794402190688291,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_7] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895780661764030465,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_8] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895783271975878709,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_6] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895753768780169280,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_9] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895792506252034080,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_10] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895791464059764794,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_11] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895793960295596052,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_12] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895795185766367284,"type":1}, tags: publishNote
2025-03-03 16:52:18.389 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_13] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895794954152706064,"type":1}, tags: publishNote
2025-03-03 16:52:18.390 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_14] INFO  c.q.x.count.biz.consumer.CountNotePublishConsumer - ==> CountNotePublishConsumer 消费了消息 {"creatorId":2100,"noteId":1895795420446064640,"type":1}, tags: publishNote
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_13] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_10] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_11] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_12] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_10] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_11] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_12] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.391 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_13] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.400 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_10] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.400 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_8] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.401 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_14] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.401 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_8] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.401 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_14] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.402 [main] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1740991938264_172.17.0.1_32850
2025-03-03 16:52:18.403 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] Notify connected event to listeners.
2025-03-03 16:52:18.403 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-03-03 16:52:18.403 [main] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-03-03 16:52:18.403 [main] INFO  com.alibaba.nacos.common.remote.client - [75886f06-0c40-45c1-8760-6e82ee2b47c8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1388/0x00000238a1a83568
2025-03-03 16:52:18.404 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-count with instance Instance{instanceId='null', ip='192.168.1.3', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=[240e:b67:57b:ab00:fbf2:c156:c48c:ed8b], preserved.register.source=SPRING_CLOUD}}
2025-03-03 16:52:18.407 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_7] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.407 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_7] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.408 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_11] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.409 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_6] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.409 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_6] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.413 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-count 192.168.1.3:8090 register finished
2025-03-03 16:52:18.413 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_9] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, note_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE note_total = note_total + (?);
2025-03-03 16:52:18.413 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_9] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - ==> Parameters: 2100(Long), 1(Long), 1(Long)
2025-03-03 16:52:18.416 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.423 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_12] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.431 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_13] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.437 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_8] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.444 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_14] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.450 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_6] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.456 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_7] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.462 [ConsumeMessageThread_xiaohashu_group_NoteOperateTopic_9] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateNoteTotalByUserId - <==    Updates: 2
2025-03-03 16:52:18.496 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - Started XiaohashuCountBizApplication in 3.662 seconds (process running for 3.99)
2025-03-03 16:52:19.247 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 4
2025-03-03 16:52:19.247 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895792506252034000,\"commentId\":40001,\"level\":1,\"parentId\":1895792506252034000}]","[{\"noteId\":1895795185766367284,\"commentId\":40004,\"level\":1,\"parentId\":1895795185766367284}]","[{\"noteId\":1895795420446064600,\"commentId\":40002,\"level\":1,\"parentId\":1895795420446064600}]","[{\"noteId\":1895794954152706000,\"commentId\":40003,\"level\":1,\"parentId\":1895794954152706000}]"]
2025-03-03 16:53:00.511 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 16:53:00.511 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40005,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 16:53:00.588 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 16:53:00.588 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40005,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 16:53:00.591 [pool-batch-consume-blocking-queue-thread-0] ERROR c.g.p.c.impl.BatchConsumeBlockingQueueTrigger - Ops.
org.springframework.data.redis.RedisSystemException: Error in execution
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:52)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:50)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:40)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:38)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:248)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:961)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:818)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:125)
	at org.springframework.data.redis.connection.lettuce.LettuceHashCommands.hIncrBy(LettuceHashCommands.java:150)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.hIncrBy(DefaultedRedisConnection.java:1395)
	at org.springframework.data.redis.core.DefaultHashOperations.lambda$increment$2(DefaultHashOperations.java:69)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultHashOperations.increment(DefaultHashOperations.java:69)
	at com.quanxiaoha.xiaohashu.count.biz.consumer.CountNoteCommentConsumer.consumeMessage(CountNoteCommentConsumer.java:90)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doConsume(BatchConsumeBlockingQueueTrigger.java:143)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$doBatchConsumer$4(BatchConsumeBlockingQueueTrigger.java:132)
	at com.github.phantomthief.util.MoreLocks.lambda$wrapAsRunnable$2(MoreLocks.java:229)
	at com.github.phantomthief.util.MoreLocks.supplyWithLock(MoreLocks.java:49)
	at com.github.phantomthief.util.MoreLocks.runWithLock(MoreLocks.java:32)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doBatchConsumer(BatchConsumeBlockingQueueTrigger.java:110)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$new$0(BatchConsumeBlockingQueueTrigger.java:61)
	at com.github.phantomthief.concurrent.MoreFutures.lambda$scheduleWithDynamicDelay$2(MoreFutures.java:349)
	at com.github.phantomthief.concurrent.MoreFutures$ScheduledTaskImpl.run(MoreFutures.java:449)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisCommandExecutionException: ERR hash value is not an integer
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:747)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:682)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:599)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-03-03 16:56:47.581 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 16:56:47.581 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40006,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 16:56:47.643 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 16:56:47.643 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40006,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 16:56:47.646 [pool-batch-consume-blocking-queue-thread-0] ERROR c.g.p.c.impl.BatchConsumeBlockingQueueTrigger - Ops.
org.springframework.data.redis.RedisSystemException: Error in execution
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:52)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:50)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:40)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:38)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:248)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:961)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:818)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:125)
	at org.springframework.data.redis.connection.lettuce.LettuceHashCommands.hIncrBy(LettuceHashCommands.java:150)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.hIncrBy(DefaultedRedisConnection.java:1395)
	at org.springframework.data.redis.core.DefaultHashOperations.lambda$increment$2(DefaultHashOperations.java:69)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultHashOperations.increment(DefaultHashOperations.java:69)
	at com.quanxiaoha.xiaohashu.count.biz.consumer.CountNoteCommentConsumer.consumeMessage(CountNoteCommentConsumer.java:90)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doConsume(BatchConsumeBlockingQueueTrigger.java:143)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$doBatchConsumer$4(BatchConsumeBlockingQueueTrigger.java:132)
	at com.github.phantomthief.util.MoreLocks.lambda$wrapAsRunnable$2(MoreLocks.java:229)
	at com.github.phantomthief.util.MoreLocks.supplyWithLock(MoreLocks.java:49)
	at com.github.phantomthief.util.MoreLocks.runWithLock(MoreLocks.java:32)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doBatchConsumer(BatchConsumeBlockingQueueTrigger.java:110)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$new$0(BatchConsumeBlockingQueueTrigger.java:61)
	at com.github.phantomthief.concurrent.MoreFutures.lambda$scheduleWithDynamicDelay$2(MoreFutures.java:349)
	at com.github.phantomthief.concurrent.MoreFutures$ScheduledTaskImpl.run(MoreFutures.java:449)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisCommandExecutionException: ERR hash value is not an integer
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:747)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:682)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:599)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-03-03 16:57:11.732 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 16:57:11.732 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40007,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 16:57:11.796 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 16:57:11.796 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40007,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 16:57:11.802 [pool-batch-consume-blocking-queue-thread-0] ERROR c.g.p.c.impl.BatchConsumeBlockingQueueTrigger - Ops.
org.springframework.data.redis.RedisSystemException: Error in execution
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:52)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:50)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:40)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:38)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:248)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:961)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:818)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:125)
	at org.springframework.data.redis.connection.lettuce.LettuceHashCommands.hIncrBy(LettuceHashCommands.java:150)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.hIncrBy(DefaultedRedisConnection.java:1395)
	at org.springframework.data.redis.core.DefaultHashOperations.lambda$increment$2(DefaultHashOperations.java:69)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultHashOperations.increment(DefaultHashOperations.java:69)
	at com.quanxiaoha.xiaohashu.count.biz.consumer.CountNoteCommentConsumer.consumeMessage(CountNoteCommentConsumer.java:90)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doConsume(BatchConsumeBlockingQueueTrigger.java:143)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$doBatchConsumer$4(BatchConsumeBlockingQueueTrigger.java:132)
	at com.github.phantomthief.util.MoreLocks.lambda$wrapAsRunnable$2(MoreLocks.java:229)
	at com.github.phantomthief.util.MoreLocks.supplyWithLock(MoreLocks.java:49)
	at com.github.phantomthief.util.MoreLocks.runWithLock(MoreLocks.java:32)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doBatchConsumer(BatchConsumeBlockingQueueTrigger.java:110)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$new$0(BatchConsumeBlockingQueueTrigger.java:61)
	at com.github.phantomthief.concurrent.MoreFutures.lambda$scheduleWithDynamicDelay$2(MoreFutures.java:349)
	at com.github.phantomthief.concurrent.MoreFutures$ScheduledTaskImpl.run(MoreFutures.java:449)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisCommandExecutionException: ERR hash value is not an integer
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:747)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:682)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:599)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-03-03 17:02:45.609 [Thread-23] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-03-03 17:02:45.609 [Thread-26] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-03-03 17:02:45.609 [Thread-23] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-03-03 17:02:45.609 [Thread-26] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-03-03 17:02:45.642 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-03-03 17:02:45.642 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-count with instance: Instance{instanceId='null', ip='192.168.1.3', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-03-03 17:02:45.646 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-03-03 17:02:45.647 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@67511161[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-03-03 17:02:45.647 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1740991938264_172.17.0.1_32850
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@c58e307[Running, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 149]
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@1bf331c6[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 209]
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_NoteOperateTopic', namespace='', nameServer='127.0.0.1:9876', topic='NoteOperateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_child_comment_totalCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.651 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.651 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.651 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.651 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.651 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_count_CommentLikeUnlikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentLikeUnlikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.762 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountCommentLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountCommentLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:45.762 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-03 17:02:45.763 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-03 17:02:48.743 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 17:02:48.779 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 17:02:49.044 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 17:02:49.052 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 17:02:49.052 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - The following 1 profile is active: "dev"
2025-03-03 17:02:49.329 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-03 17:02:49.331 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-03 17:02:49.343 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2025-03-03 17:02:49.458 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=69ab8cb7-b690-3c4b-b80c-208a3dc683e1
2025-03-03 17:02:49.597 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.624 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.626 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.628 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.629 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$721/0x000002cae950c530] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.630 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.633 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.634 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-03 17:02:49.756 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8090 (http)
2025-03-03 17:02:49.761 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-03 17:02:49.761 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-03-03 17:02:49.816 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-03 17:02:49.816 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 757 ms
2025-03-03 17:02:49.864 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-03-03 17:02:50.052 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-03 17:02:50.357 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountCommentLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountCommentLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.357 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countCommentLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-03-03 17:02:50.497 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-03-03 17:02:50.541 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_count_CommentLikeUnlikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentLikeUnlikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.541 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countCommentLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-03-03 17:02:50.569 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.569 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFans2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-03-03 17:02:50.595 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.596 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFansConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2025-03-03 17:02:50.621 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.621 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowing2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_5
2025-03-03 17:02:50.644 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.644 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowingConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_6
2025-03-03 17:02:50.668 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_child_comment_totalCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.669 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteChildCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_7
2025-03-03 17:02:50.700 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.700 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollect2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_8
2025-03-03 17:02:50.723 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.724 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollectConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_9
2025-03-03 17:02:50.749 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.749 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_10
2025-03-03 17:02:50.775 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.775 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_11
2025-03-03 17:02:50.803 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.803 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_12
2025-03-03 17:02:50.828 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_NoteOperateTopic', namespace='', nameServer='127.0.0.1:9876', topic='NoteOperateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-03 17:02:50.828 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNotePublishConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_13
2025-03-03 17:02:51.277 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8090 (http) with context path ''
2025-03-03 17:02:51.281 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-03 17:02:51.281 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-03-03 17:02:51.281 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-03-03 17:02:51.281 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-03-03 17:02:51.295 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-03-03 17:02:51.295 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-03-03 17:02:51.295 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-03-03 17:02:51.298 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-03-03 17:02:51.298 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-03-03 17:02:51.299 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-03-03 17:02:51.304 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of ec05c31c-3a68-47ea-a0df-e81ba5bddd85
2025-03-03 17:02:51.313 [main] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-03-03 17:02:51.313 [main] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-03-03 17:02:51.314 [main] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-03-03 17:02:51.315 [main] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-03-03 17:02:51.330 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-03-03 17:02:51.857 [main] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1740992571697_172.17.0.1_38828
2025-03-03 17:02:51.857 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] Notify connected event to listeners.
2025-03-03 17:02:51.857 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-03-03 17:02:51.857 [main] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-03-03 17:02:51.857 [main] INFO  com.alibaba.nacos.common.remote.client - [ec05c31c-3a68-47ea-a0df-e81ba5bddd85] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1242/0x000002cae9980890
2025-03-03 17:02:51.858 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-count with instance Instance{instanceId='null', ip='192.168.1.3', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=[240e:b67:57b:ab00:fbf2:c156:c48c:ed8b], preserved.register.source=SPRING_CLOUD}}
2025-03-03 17:02:51.867 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-count 192.168.1.3:8090 register finished
2025-03-03 17:02:51.953 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - Started XiaohashuCountBizApplication in 3.572 seconds (process running for 3.898)
2025-03-03 17:02:56.390 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 17:02:56.390 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 17:02:56.390 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40008,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 17:02:56.390 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40008,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 17:02:56.535 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 17:02:56.661 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 17:02:56.680 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 1
2025-03-03 18:06:37.268 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 18:06:37.269 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40009,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:06:37.290 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 18:06:37.291 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 18:06:37.303 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 18:06:37.684 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 18:06:37.685 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40009,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:07:05.539 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 18:07:05.539 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40010,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:07:05.541 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 18:07:05.542 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 18:07:05.551 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 18:07:05.929 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 18:07:05.929 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40010,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:07:07.954 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 18:07:07.954 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40011,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:07:08.577 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 18:07:08.577 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40011,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:07:08.580 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 18:07:08.580 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 18:07:08.588 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 18:07:09.967 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 18:07:09.967 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40012,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:07:10.599 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 18:07:10.599 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40012,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:07:10.603 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 18:07:10.604 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 18:07:10.614 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 18:24:08.861 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 18:24:08.861 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40013,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:24:08.870 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 18:24:08.870 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 18:24:08.878 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 18:24:09.076 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 18:24:09.076 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40013,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:38:26.401 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 18:38:26.401 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40014,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 18:38:26.405 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 18:38:26.406 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 18:38:26.416 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 18:38:26.573 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 18:38:26.573 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40014,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:12:53.128 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 20:12:53.128 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40015,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:12:53.735 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 20:12:53.735 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40015,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:12:53.748 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 20:12:53.750 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 20:12:53.758 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 20:23:55.074 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 20:23:55.074 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40016,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:23:55.717 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 20:23:55.717 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40016,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:23:55.720 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 20:23:55.721 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 20:23:55.735 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 20:26:17.857 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 20:26:17.857 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40017,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:26:17.860 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 20:26:17.861 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 20:26:17.869 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 20:26:18.189 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 20:26:18.189 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40017,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:26:29.881 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 20:26:29.881 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40018,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:26:29.884 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 20:26:29.885 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 20:26:29.893 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 20:26:30.198 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 20:26:30.198 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40018,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:40:04.593 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 20:40:04.593 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40019,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:40:04.596 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 20:40:04.596 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 20:40:04.604 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 20:40:04.713 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 20:40:04.713 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40019,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:48:50.023 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 20:48:50.023 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40020,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 20:48:50.026 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 20:48:50.027 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 20:48:50.036 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 20:48:50.160 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 20:48:50.160 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40020,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 21:21:47.818 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 21:21:47.818 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40021,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 21:21:48.541 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 21:21:48.541 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40021,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 21:21:48.553 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 21:21:48.553 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 21:21:48.560 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 21:28:38.908 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 21:28:38.908 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40022,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 21:28:38.912 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 21:28:38.912 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 21:28:38.921 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 21:28:39.104 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 21:28:39.104 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40022,\"level\":1,\"parentId\":1895795185766367284}]"]
2025-03-03 21:38:23.366 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 21:38:23.366 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40023,\"level\":2,\"parentId\":40022}]"]
2025-03-03 21:38:23.370 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 21:38:23.372 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 21:38:23.380 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 21:38:23.580 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 21:38:23.581 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40023,\"level\":2,\"parentId\":40022}]"]
2025-03-03 21:38:23.585 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-03 21:38:23.608 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40022(Long)
2025-03-03 21:38:23.617 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-03 21:38:23.654 [NettyClientPublicExecutor_1] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001A6D863947C6B0EF16F140000, offsetMsgId=AC1B600100002A9F00000000000086D9, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=0]
2025-03-03 22:20:37.924 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 22:20:37.924 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40024,\"level\":2,\"parentId\":40022}]"]
2025-03-03 22:20:37.938 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-03 22:20:37.939 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40022(Long)
2025-03-03 22:20:37.947 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-03 22:20:37.949 [NettyClientPublicExecutor_2] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001A6D863947C6B0F181ABC0001, offsetMsgId=AC1B600100002A9F0000000000008B0E, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=1]
2025-03-03 22:20:38.824 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 22:20:38.824 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40024,\"level\":2,\"parentId\":40022}]"]
2025-03-03 22:20:38.826 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-03 22:20:38.827 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-03 22:20:38.835 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-03 22:22:50.086 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 22:22:50.086 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895793960295596052,\"commentId\":40025,\"level\":1,\"parentId\":1895793960295596052}]"]
2025-03-03 22:22:50.094 [pool-batch-consume-blocking-queue-thread-0] ERROR c.g.p.c.impl.BatchConsumeBlockingQueueTrigger - Ops.
org.springframework.data.redis.RedisSystemException: Error in execution
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:52)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:50)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:40)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:38)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:248)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:961)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:818)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:125)
	at org.springframework.data.redis.connection.lettuce.LettuceHashCommands.hIncrBy(LettuceHashCommands.java:150)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.hIncrBy(DefaultedRedisConnection.java:1395)
	at org.springframework.data.redis.core.DefaultHashOperations.lambda$increment$2(DefaultHashOperations.java:69)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultHashOperations.increment(DefaultHashOperations.java:69)
	at com.quanxiaoha.xiaohashu.count.biz.consumer.CountNoteCommentConsumer.consumeMessage(CountNoteCommentConsumer.java:90)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doConsume(BatchConsumeBlockingQueueTrigger.java:143)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$doBatchConsumer$4(BatchConsumeBlockingQueueTrigger.java:132)
	at com.github.phantomthief.util.MoreLocks.lambda$wrapAsRunnable$2(MoreLocks.java:229)
	at com.github.phantomthief.util.MoreLocks.supplyWithLock(MoreLocks.java:49)
	at com.github.phantomthief.util.MoreLocks.runWithLock(MoreLocks.java:32)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doBatchConsumer(BatchConsumeBlockingQueueTrigger.java:110)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$new$0(BatchConsumeBlockingQueueTrigger.java:61)
	at com.github.phantomthief.concurrent.MoreFutures.lambda$scheduleWithDynamicDelay$2(MoreFutures.java:349)
	at com.github.phantomthief.concurrent.MoreFutures$ScheduledTaskImpl.run(MoreFutures.java:449)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisCommandExecutionException: ERR hash value is not an integer
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:747)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:682)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:599)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-03-03 22:22:50.178 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 22:22:50.178 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895793960295596052,\"commentId\":40025,\"level\":1,\"parentId\":1895793960295596052}]"]
2025-03-03 22:23:23.446 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-03 22:23:23.446 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895794402190688291,\"commentId\":40026,\"level\":1,\"parentId\":1895794402190688291}]"]
2025-03-03 22:23:23.448 [pool-batch-consume-blocking-queue-thread-0] ERROR c.g.p.c.impl.BatchConsumeBlockingQueueTrigger - Ops.
org.springframework.data.redis.RedisSystemException: Error in execution
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:52)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:50)
	at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert(LettuceExceptionConverter.java:41)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:40)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:38)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:248)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.await(LettuceConnection.java:961)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$4(LettuceConnection.java:818)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.just(LettuceInvoker.java:125)
	at org.springframework.data.redis.connection.lettuce.LettuceHashCommands.hIncrBy(LettuceHashCommands.java:150)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.hIncrBy(DefaultedRedisConnection.java:1395)
	at org.springframework.data.redis.core.DefaultHashOperations.lambda$increment$2(DefaultHashOperations.java:69)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)
	at org.springframework.data.redis.core.DefaultHashOperations.increment(DefaultHashOperations.java:69)
	at com.quanxiaoha.xiaohashu.count.biz.consumer.CountNoteCommentConsumer.consumeMessage(CountNoteCommentConsumer.java:90)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doConsume(BatchConsumeBlockingQueueTrigger.java:143)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$doBatchConsumer$4(BatchConsumeBlockingQueueTrigger.java:132)
	at com.github.phantomthief.util.MoreLocks.lambda$wrapAsRunnable$2(MoreLocks.java:229)
	at com.github.phantomthief.util.MoreLocks.supplyWithLock(MoreLocks.java:49)
	at com.github.phantomthief.util.MoreLocks.runWithLock(MoreLocks.java:32)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.doBatchConsumer(BatchConsumeBlockingQueueTrigger.java:110)
	at com.github.phantomthief.collection.impl.BatchConsumeBlockingQueueTrigger.lambda$new$0(BatchConsumeBlockingQueueTrigger.java:61)
	at com.github.phantomthief.concurrent.MoreFutures.lambda$scheduleWithDynamicDelay$2(MoreFutures.java:349)
	at com.github.phantomthief.concurrent.MoreFutures$ScheduledTaskImpl.run(MoreFutures.java:449)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.lettuce.core.RedisCommandExecutionException: ERR hash value is not an integer
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)
	at io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)
	at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)
	at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)
	at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:747)
	at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:682)
	at io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:599)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
2025-03-03 22:23:23.508 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-03 22:23:23.508 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895794402190688291,\"commentId\":40026,\"level\":1,\"parentId\":1895794402190688291}]"]
