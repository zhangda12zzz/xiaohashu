2025-03-05 11:01:32.499 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:01:32.500 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40113,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 11:01:32.516 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:01:32.518 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 11:01:32.527 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 1
2025-03-05 11:07:33.986 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:07:33.987 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40114,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 11:07:34.018 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:07:34.018 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40114,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 11:07:34.021 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:07:34.022 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 11:07:34.243 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 11:07:48.120 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:07:48.120 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40115,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 11:07:48.386 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:07:48.386 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40115,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 11:07:48.389 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:07:48.389 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 11:07:48.396 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 11:16:19.426 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:16:19.426 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895780661764030465,\"commentId\":40116,\"level\":1,\"parentId\":1895780661764030465}]"]
2025-03-05 11:16:19.751 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:16:19.751 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895780661764030465,\"commentId\":40116,\"level\":1,\"parentId\":1895780661764030465}]"]
2025-03-05 11:16:19.754 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:16:19.754 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895780661764030465(Long), 1(Integer), 1(Integer)
2025-03-05 11:16:19.769 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 1
2025-03-05 11:17:05.192 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:17:05.192 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895756189493362701,\"commentId\":40117,\"level\":1,\"parentId\":1895756189493362701}]"]
2025-03-05 11:17:05.195 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:17:05.196 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895756189493362701(Long), 1(Integer), 1(Integer)
2025-03-05 11:17:05.203 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 1
2025-03-05 11:17:05.861 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:17:05.861 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895756189493362701,\"commentId\":40117,\"level\":1,\"parentId\":1895756189493362701}]"]
2025-03-05 11:17:32.455 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:17:32.455 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895793656292442205,\"commentId\":40118,\"level\":1,\"parentId\":1895793656292442205}]"]
2025-03-05 11:17:32.458 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:17:32.459 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895793656292442205(Long), 1(Integer), 1(Integer)
2025-03-05 11:17:32.467 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 1
2025-03-05 11:17:33.124 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:17:33.124 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895793656292442205,\"commentId\":40118,\"level\":1,\"parentId\":1895793656292442205}]"]
2025-03-05 11:17:55.340 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:17:55.340 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895794954152706064,\"commentId\":40119,\"level\":1,\"parentId\":1895794954152706064}]"]
2025-03-05 11:17:55.698 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:17:55.698 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895794954152706064,\"commentId\":40119,\"level\":1,\"parentId\":1895794954152706064}]"]
2025-03-05 11:17:55.701 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:17:55.701 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895794954152706064(Long), 1(Integer), 1(Integer)
2025-03-05 11:17:55.708 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 1
2025-03-05 11:31:04.598 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:31:04.598 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40120,\"level\":1,\"parentId\":1895795420446064640}]"]
2025-03-05 11:31:04.601 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:31:04.601 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 11:31:04.610 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 1
2025-03-05 11:31:05.392 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:31:05.392 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40120,\"level\":1,\"parentId\":1895795420446064640}]"]
2025-03-05 11:31:12.685 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 11:31:12.685 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40121,\"level\":2,\"parentId\":40120}]"]
2025-03-05 11:31:12.686 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 11:31:12.687 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 11:31:12.696 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 11:31:13.479 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 11:31:13.479 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40121,\"level\":2,\"parentId\":40120}]"]
2025-03-05 11:31:13.481 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 11:31:13.482 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40120(Long)
2025-03-05 11:31:13.499 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 11:31:13.503 [NettyClientPublicExecutor_2] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B171245DD0039, offsetMsgId=AC1B600100002A9F00000000000037A6, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=0]
2025-03-05 12:14:40.024 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:14:40.024 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:14:40.024 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40122,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 12:14:40.024 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40122,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 12:14:40.044 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:14:40.045 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:14:40.054 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:14:53.139 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:14:53.139 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40123,\"level\":2,\"parentId\":40122}]"]
2025-03-05 12:14:53.140 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:14:53.141 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40122(Long)
2025-03-05 12:14:53.149 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:14:53.151 [NettyClientPublicExecutor_3] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173A3EDE003A, offsetMsgId=AC1B600100002A9F000000000000451A, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=1]
2025-03-05 12:14:53.170 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:14:53.170 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40123,\"level\":2,\"parentId\":40122}]"]
2025-03-05 12:14:53.172 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:14:53.172 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:14:53.180 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:15:11.312 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:15:11.312 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40124,\"level\":2,\"parentId\":40115}]"]
2025-03-05 12:15:11.315 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:15:11.315 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40115(Long)
2025-03-05 12:15:11.322 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:15:11.323 [NettyClientPublicExecutor_4] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173A85DA003B, offsetMsgId=AC1B600100002A9F0000000000004948, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=2], queueOffset=0]
2025-03-05 12:15:11.343 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:15:11.343 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40124,\"level\":2,\"parentId\":40115}]"]
2025-03-05 12:15:11.345 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:15:11.346 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:15:11.353 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:15:23.451 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:15:23.451 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40125,\"level\":2,\"parentId\":40022}]"]
2025-03-05 12:15:23.454 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:15:23.455 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40022(Long)
2025-03-05 12:15:23.466 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:15:23.469 [NettyClientPublicExecutor_5] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173AB54B003C, offsetMsgId=AC1B600100002A9F0000000000004D73, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=2]
2025-03-05 12:15:23.482 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:15:23.482 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40125,\"level\":2,\"parentId\":40022}]"]
2025-03-05 12:15:23.485 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:15:23.485 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 12:15:23.494 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:15:32.552 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:15:32.552 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40126,\"level\":2,\"parentId\":40022}]"]
2025-03-05 12:15:32.555 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:15:32.555 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40022(Long)
2025-03-05 12:15:32.563 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:15:32.565 [NettyClientPublicExecutor_6] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173AD8D4003D, offsetMsgId=AC1B600100002A9F000000000000519E, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=0]
2025-03-05 12:15:32.583 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:15:32.583 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40126,\"level\":2,\"parentId\":40022}]"]
2025-03-05 12:15:32.585 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:15:32.585 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 12:15:32.592 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:15:56.776 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:15:56.776 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40127,\"level\":2,\"parentId\":40114}]"]
2025-03-05 12:15:56.778 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:15:56.778 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40114(Long)
2025-03-05 12:15:56.786 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:15:56.787 [NettyClientPublicExecutor_7] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173B3772003E, offsetMsgId=AC1B600100002A9F00000000000055CF, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=0]
2025-03-05 12:15:56.807 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:15:56.807 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40127,\"level\":2,\"parentId\":40114}]"]
2025-03-05 12:15:56.809 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:15:56.809 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:15:56.817 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:20:00.085 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:20:00.085 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:20:00.085 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40128,\"level\":2,\"parentId\":40113}]"]
2025-03-05 12:20:00.085 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40128,\"level\":2,\"parentId\":40113}]"]
2025-03-05 12:20:00.088 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:20:00.088 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:20:00.094 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:20:00.095 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40113(Long)
2025-03-05 12:20:00.096 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:20:00.102 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:20:00.103 [NettyClientPublicExecutor_8] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173EEDE7003F, offsetMsgId=AC1B600100002A9F00000000000059F9, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=1]
2025-03-05 12:20:10.189 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:20:10.189 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:20:10.189 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40129,\"level\":2,\"parentId\":40113}]"]
2025-03-05 12:20:10.189 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40129,\"level\":2,\"parentId\":40113}]"]
2025-03-05 12:20:10.192 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:20:10.192 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:20:10.192 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:20:10.192 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40113(Long)
2025-03-05 12:20:10.199 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:20:10.200 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:20:10.201 [NettyClientPublicExecutor_9] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173F15580040, offsetMsgId=AC1B600100002A9F0000000000005E27, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=2]
2025-03-05 12:20:22.313 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:20:22.313 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:20:22.313 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40130,\"level\":2,\"parentId\":40113}]"]
2025-03-05 12:20:22.313 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40130,\"level\":2,\"parentId\":40113}]"]
2025-03-05 12:20:22.315 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:20:22.315 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:20:22.315 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40113(Long)
2025-03-05 12:20:22.315 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:20:22.325 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:20:22.325 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:20:22.326 [NettyClientPublicExecutor_10] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B173F44B50041, offsetMsgId=AC1B600100002A9F0000000000006255, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=3]
2025-03-05 12:26:00.629 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:26:00.629 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:26:00.629 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40131,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 12:26:00.629 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40131,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 12:26:00.633 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:26:00.635 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:26:00.643 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:26:41.065 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:26:41.065 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:26:41.065 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40132,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 12:26:41.065 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40132,\"level\":1,\"parentId\":1895753768780169280}]"]
2025-03-05 12:26:41.068 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:26:41.068 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:26:41.083 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:26:50.155 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:26:50.155 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40133,\"level\":2,\"parentId\":40131}]"]
2025-03-05 12:26:50.157 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:26:50.157 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40131(Long)
2025-03-05 12:26:50.167 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:26:50.168 [NettyClientPublicExecutor_11] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B17452FB70042, offsetMsgId=AC1B600100002A9F0000000000006CCB, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=1]
2025-03-05 12:26:50.171 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:26:50.171 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40133,\"level\":2,\"parentId\":40131}]"]
2025-03-05 12:26:50.173 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:26:50.174 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:26:50.183 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:27:04.306 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:27:04.306 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40134,\"level\":2,\"parentId\":40131}]"]
2025-03-05 12:27:04.308 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:27:04.308 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40131(Long)
2025-03-05 12:27:04.316 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:27:04.318 [NettyClientPublicExecutor_12] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B174566FC0043, offsetMsgId=AC1B600100002A9F0000000000007102, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=2]
2025-03-05 12:27:04.321 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:27:04.321 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40134,\"level\":2,\"parentId\":40131}]"]
2025-03-05 12:27:04.323 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:27:04.323 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:27:04.332 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:27:22.518 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:27:22.518 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:27:22.518 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40135,\"level\":2,\"parentId\":40131}]"]
2025-03-05 12:27:22.518 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895753768780169280,\"commentId\":40135,\"level\":2,\"parentId\":40131}]"]
2025-03-05 12:27:22.519 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:27:22.520 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40131(Long)
2025-03-05 12:27:22.520 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:27:22.521 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895753768780169280(Long), 1(Integer), 1(Integer)
2025-03-05 12:27:22.529 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:27:22.529 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:27:22.530 [NettyClientPublicExecutor_13] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B1745AE210044, offsetMsgId=AC1B600100002A9F0000000000007536, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=3]
2025-03-05 12:34:32.636 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:34:32.636 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40136,\"level\":2,\"parentId\":40120}]"]
2025-03-05 12:34:32.636 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:34:32.636 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40136,\"level\":2,\"parentId\":40120}]"]
2025-03-05 12:34:32.638 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:34:32.638 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:34:32.638 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40120(Long)
2025-03-05 12:34:32.638 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 12:34:32.647 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:34:32.648 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:34:32.649 [NettyClientPublicExecutor_14] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B174C3E480045, offsetMsgId=AC1B600100002A9F0000000000007967, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=4]
2025-03-05 12:36:31.847 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:36:31.847 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:36:31.847 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40137,\"level\":2,\"parentId\":40120}]"]
2025-03-05 12:36:31.847 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40137,\"level\":2,\"parentId\":40120}]"]
2025-03-05 12:36:31.850 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:36:31.850 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:36:31.850 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40120(Long)
2025-03-05 12:36:31.850 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 12:36:31.857 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:36:31.861 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:36:31.862 [NettyClientPublicExecutor_15] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B174E0FF50046, offsetMsgId=AC1B600100002A9F0000000000007D95, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=4]
2025-03-05 12:36:40.949 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:36:40.949 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:36:40.949 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40138,\"level\":1,\"parentId\":1895795420446064640}]"]
2025-03-05 12:36:40.949 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795420446064640,\"commentId\":40138,\"level\":1,\"parentId\":1895795420446064640}]"]
2025-03-05 12:36:40.952 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:36:40.952 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 12:36:40.960 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:40:44.319 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:40:44.319 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40139,\"level\":2,\"parentId\":40022}]"]
2025-03-05 12:40:44.322 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:40:44.322 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40022(Long)
2025-03-05 12:40:44.328 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:40:44.329 [NettyClientPublicExecutor_16] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B1751EA290047, offsetMsgId=AC1B600100002A9F00000000000084F3, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=2], queueOffset=1]
2025-03-05 12:40:44.334 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:40:44.334 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40139,\"level\":2,\"parentId\":40022}]"]
2025-03-05 12:40:44.339 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:40:44.340 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 12:40:44.349 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:49:05.109 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:49:05.109 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40140,\"level\":2,\"parentId\":40041}]"]
2025-03-05 12:49:05.109 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:49:05.109 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40140,\"level\":2,\"parentId\":40041}]"]
2025-03-05 12:49:05.112 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:49:05.112 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:49:05.112 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 12:49:05.112 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40041(Long)
2025-03-05 12:49:05.119 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:49:05.121 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:49:05.121 [NettyClientPublicExecutor_17] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B17598E600048, offsetMsgId=AC1B600100002A9F0000000000008930, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=5]
2025-03-05 12:49:53.607 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 12:49:53.607 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 12:49:53.607 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895792506252034080,\"commentId\":40141,\"level\":2,\"parentId\":40046}]"]
2025-03-05 12:49:53.607 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895792506252034080,\"commentId\":40141,\"level\":2,\"parentId\":40046}]"]
2025-03-05 12:49:53.610 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 12:49:53.610 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 12:49:53.610 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40046(Long)
2025-03-05 12:49:53.610 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895792506252034080(Long), 1(Integer), 1(Integer)
2025-03-05 12:49:53.618 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 12:49:53.620 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 12:49:53.620 [NettyClientPublicExecutor_18] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001E48863947C6B175A4BD20049, offsetMsgId=AC1B600100002A9F0000000000008D70, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=6]
2025-03-05 16:22:23.474 [Thread-26] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-03-05 16:22:23.474 [Thread-23] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-03-05 16:22:23.476 [Thread-23] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-03-05 16:22:23.479 [Thread-26] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-03-05 16:22:30.634 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-03-05 16:22:30.635 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-count with instance: Instance{instanceId='null', ip='192.168.1.3', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-03-05 16:22:30.642 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-03-05 16:22:30.642 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-03-05 16:22:30.642 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@31cc94d6[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-03-05 16:22:30.643 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1741076982182_172.17.0.1_36644
2025-03-05 16:22:30.646 [nacos-grpc-client-executor-127.0.0.1-10708] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1741076982182_172.17.0.1_36644]Ignore complete event,isRunning:false,isAbandon=false
2025-03-05 16:22:30.647 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3923f694[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 10709]
2025-03-05 16:22:30.647 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@5dc7158[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 17786]
2025-03-05 16:22:30.647 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-03-05 16:22:30.647 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-03-05 16:22:30.647 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-03-05 16:22:30.649 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_NoteOperateTopic', namespace='', nameServer='127.0.0.1:9876', topic='NoteOperateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.649 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.649 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.649 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_child_comment_totalCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.650 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_count_CommentLikeUnlikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentLikeUnlikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.801 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountCommentLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountCommentLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:30.802 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2025-03-05 16:22:30.804 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2025-03-05 16:22:37.125 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-05 16:22:37.164 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-05 16:22:37.426 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-05 16:22:37.435 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-05 16:22:37.435 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - The following 1 profile is active: "dev"
2025-03-05 16:22:37.779 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-03-05 16:22:37.781 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-03-05 16:22:37.795 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-03-05 16:22:37.931 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=24fdf110-3765-33ce-a09b-603b95eb11cb
2025-03-05 16:22:38.079 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.110 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.111 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.114 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.114 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$721/0x000001e5c6515e40] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.115 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.120 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.121 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-03-05 16:22:38.261 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8090 (http)
2025-03-05 16:22:38.268 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-05 16:22:38.268 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-03-05 16:22:38.319 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-05 16:22:38.320 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 874 ms
2025-03-05 16:22:38.374 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-03-05 16:22:38.602 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-03-05 16:22:38.946 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountCommentLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountCommentLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:38.946 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countCommentLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-03-05 16:22:39.092 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-03-05 16:22:39.131 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_count_CommentLikeUnlikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CommentLikeUnlikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.131 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countCommentLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-03-05 16:22:39.156 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFans2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFans2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.157 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFans2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-03-05 16:22:39.181 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFansTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFansTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.181 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFansConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_4
2025-03-05 16:22:39.204 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowing2DBTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowing2DBTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.204 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowing2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_5
2025-03-05 16:22:39.230 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountFollowingTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountFollowingTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.230 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countFollowingConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_6
2025-03-05 16:22:39.253 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_child_comment_totalCountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.253 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteChildCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_7
2025-03-05 16:22:39.284 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollect2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollect2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.284 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollect2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_8
2025-03-05 16:22:39.306 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCollectTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCollectTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.306 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCollectConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_9
2025-03-05 16:22:39.330 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteCommentTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteCommentTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.330 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteCommentConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_10
2025-03-05 16:22:39.354 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLike2DBTTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLike2DBTTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.354 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLike2DBConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_11
2025-03-05 16:22:39.379 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_CountNoteLikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='CountNoteLikeTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.379 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNoteLikeConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_12
2025-03-05 16:22:39.403 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_NoteOperateTopic', namespace='', nameServer='127.0.0.1:9876', topic='NoteOperateTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-03-05 16:22:39.404 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:countNotePublishConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_13
2025-03-05 16:22:39.872 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-03-05 16:22:39.923 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8090 (http) with context path ''
2025-03-05 16:22:39.926 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-03-05 16:22:39.926 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-03-05 16:22:39.926 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-03-05 16:22:39.926 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-03-05 16:22:39.944 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-03-05 16:22:39.945 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-03-05 16:22:39.945 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-03-05 16:22:39.947 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-03-05 16:22:39.947 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-03-05 16:22:39.949 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-03-05 16:22:39.954 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 6f012d8e-4cb5-4f00-b03e-c3a368a206c9
2025-03-05 16:22:39.964 [main] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-03-05 16:22:39.965 [main] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-03-05 16:22:39.965 [main] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-03-05 16:22:39.966 [main] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-03-05 16:22:39.982 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-03-05 16:22:40.529 [main] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1741162960379_172.17.0.1_56030
2025-03-05 16:22:40.529 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] Notify connected event to listeners.
2025-03-05 16:22:40.529 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-03-05 16:22:40.529 [main] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-03-05 16:22:40.529 [main] INFO  com.alibaba.nacos.common.remote.client - [6f012d8e-4cb5-4f00-b03e-c3a368a206c9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1256/0x000001e5c699c150
2025-03-05 16:22:40.530 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-count with instance Instance{instanceId='null', ip='192.168.1.3', port=8090, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=[240e:b67:57b:ab00:fbf2:c156:c48c:ed8b], preserved.register.source=SPRING_CLOUD}}
2025-03-05 16:22:40.540 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-count 192.168.1.3:8090 register finished
2025-03-05 16:22:40.627 [main] INFO  c.q.x.count.biz.XiaohashuCountBizApplication - Started XiaohashuCountBizApplication in 3.891 seconds (process running for 4.166)
2025-03-05 16:25:00.701 [http-nio-8090-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-05 16:25:00.701 [http-nio-8090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-05 16:25:00.701 [http-nio-8090-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-03-05 16:25:00.753 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1862482047415615528}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:25:00.769 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:25:00.858 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1862482047415615528(Long)
2025-03-05 16:25:00.869 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:25:00.872 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 119ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1862482047415615528,"likeTotal":32109,"collectTotal":2946,"commentTotal":3153}} =================================== 
2025-03-05 16:40:33.611 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:40:33.612 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:40:33.613 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:40:33.614 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:40:33.615 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:43:28.638 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:43:28.640 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:43:28.641 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:43:28.642 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:43:28.642 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:45:51.812 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:45:51.813 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:45:51.814 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:45:51.816 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:45:51.816 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:46:15.034 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:46:15.034 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:46:15.034 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:46:15.035 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:46:15.035 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 1ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:47:38.442 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:47:38.443 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:47:38.443 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:47:38.444 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:47:38.444 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:50:31.192 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:50:31.193 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:50:31.194 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:50:31.195 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:50:31.195 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:50:58.278 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:50:58.278 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:50:58.278 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:50:58.280 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:50:58.280 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:52:05.659 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 101
2025-03-05 16:52:05.664 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:52:05.665 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:52:05.666 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 16:52:05.667 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:52:05.667 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 16:52:05.667 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 101
2025-03-05 16:56:12.081 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:56:12.083 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:56:12.083 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 16:56:12.084 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:56:12.085 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":0,"collectTotal":0,"commentTotal":61}} =================================== 
2025-03-05 16:56:17.538 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794954152706064}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:56:17.538 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:56:17.538 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794954152706064(Long)
2025-03-05 16:56:17.539 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:56:17.540 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 1ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794954152706064,"likeTotal":0,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 16:56:20.351 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 101
2025-03-05 16:56:20.351 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895793656292442205}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:56:20.352 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:56:20.352 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895793656292442205(Long)
2025-03-05 16:56:20.353 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:56:20.354 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895793656292442205,"likeTotal":0,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 16:56:20.354 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 101
2025-03-05 16:56:26.073 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 16:56:26.074 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895791464059764794}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:56:26.074 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:56:26.075 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895791464059764794(Long)
2025-03-05 16:56:26.076 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:56:26.076 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895791464059764794,"likeTotal":0,"collectTotal":0,"commentTotal":4}} =================================== 
2025-03-05 16:56:26.077 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 16:59:05.796 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 101
2025-03-05 16:59:05.797 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895793960295596052}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:59:05.797 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:59:05.798 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895793960295596052(Long)
2025-03-05 16:59:05.799 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:59:05.799 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895793960295596052,"likeTotal":0,"collectTotal":0,"commentTotal":23}} =================================== 
2025-03-05 16:59:05.799 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 101
2025-03-05 16:59:07.743 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 16:59:07.744 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:59:07.744 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:59:07.744 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 16:59:07.745 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:59:07.745 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 1ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":0,"collectTotal":0,"commentTotal":6}} =================================== 
2025-03-05 16:59:07.746 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 16:59:11.779 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 101
2025-03-05 16:59:11.780 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895791181581779002}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:59:11.780 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:59:11.781 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895791181581779002(Long)
2025-03-05 16:59:11.783 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:59:11.784 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895791181581779002,"likeTotal":0,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 16:59:11.785 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 101
2025-03-05 16:59:19.913 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 16:59:19.914 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895780661764030465}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 16:59:19.914 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 16:59:19.914 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895780661764030465(Long)
2025-03-05 16:59:19.915 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 16:59:19.916 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895780661764030465,"likeTotal":0,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 16:59:19.916 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 16:59:51.914 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 16:59:51.914 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 16:59:51.915 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40142,\"level\":2,\"parentId\":40022}]"]
2025-03-05 16:59:51.915 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895795185766367284,\"commentId\":40142,\"level\":2,\"parentId\":40022}]"]
2025-03-05 16:59:52.077 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==>  Preparing: update t_comment set child_comment_total = child_comment_total + ?, update_time = now() where id = ? and level = 1
2025-03-05 16:59:52.079 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - ==> Parameters: 1(Integer), 40022(Long)
2025-03-05 16:59:52.083 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 16:59:52.088 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.C.updateChildCommentTotal - <==    Updates: 1
2025-03-05 16:59:52.095 [NettyClientPublicExecutor_1] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【评论热度值更新】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B183F279C0000, offsetMsgId=AC1B600100002A9F00000000000091AA, messageQueue=MessageQueue [topic=CommentHeatUpdateTopic, brokerName=SK-20231010EQPS, queueId=2], queueOffset=2]
2025-03-05 16:59:52.136 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 16:59:52.146 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 17:00:51.152 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, size: 1
2025-03-05 17:00:51.153 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.c.biz.consumer.CountNoteChildCommentConsumer - ==> 【笔记二级评论数】聚合消息, ["[{\"noteId\":1895793656292442205,\"commentId\":40143,\"level\":1,\"parentId\":1895793656292442205}]"]
2025-03-05 17:00:51.215 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, size: 1
2025-03-05 17:00:51.215 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCommentConsumer - ==> 【笔记评论数】聚合消息, ["[{\"noteId\":1895793656292442205,\"commentId\":40143,\"level\":1,\"parentId\":1895793656292442205}]"]
2025-03-05 17:00:51.217 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, comment_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE comment_total = comment_total + (?);
2025-03-05 17:00:51.218 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - ==> Parameters: 1895793656292442205(Long), 1(Integer), 1(Integer)
2025-03-05 17:00:51.226 [pool-batch-consume-blocking-queue-thread-0] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCommentTotalByNoteId - <==    Updates: 2
2025-03-05 17:12:25.522 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 17:12:25.524 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 17:12:25.526 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 17:12:25.526 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 17:12:25.527 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 17:12:25.528 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 17:12:25.528 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 17:12:28.078 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 17:12:28.079 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 17:12:28.079 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 17:12:28.079 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 17:12:28.081 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 17:12:28.081 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":0,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 17:12:28.081 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 17:12:29.802 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 17:12:29.803 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794954152706064}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 17:12:29.803 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 17:12:29.803 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794954152706064(Long)
2025-03-05 17:12:29.805 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 17:12:29.805 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794954152706064,"likeTotal":0,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 17:12:29.806 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 17:50:01.711 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 17:50:01.711 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40120,\"type\":1,\"createTime\":\"2025-03-05 17:49:39\"}"]
2025-03-05 17:50:01.715 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40120,"count":1}]
2025-03-05 17:50:01.722 [NettyClientPublicExecutor_2] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B186D13F70001, offsetMsgId=AC1B600100002A9F000000000000974F, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=0]
2025-03-05 17:50:20.493 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_1] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40120,"count":1}]...
2025-03-05 17:50:20.504 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 17:50:20.505 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40120(Long)
2025-03-05 17:50:20.522 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 17:57:52.664 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 17:57:52.664 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40138,\"type\":1,\"createTime\":\"2025-03-05 17:57:51\"}"]
2025-03-05 17:57:52.664 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40138,"count":1}]
2025-03-05 17:57:52.669 [NettyClientPublicExecutor_3] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1874439C0002, offsetMsgId=AC1B600100002A9F00000000000099F4, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=1]
2025-03-05 17:57:52.670 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_2] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40138,"count":1}]...
2025-03-05 17:57:52.672 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 17:57:52.673 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40138(Long)
2025-03-05 17:57:52.683 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 17:58:00.751 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 17:58:00.751 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40121,\"type\":1,\"createTime\":\"2025-03-05 17:58:00\"}"]
2025-03-05 17:58:00.751 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40121,"count":1}]
2025-03-05 17:58:00.754 [NettyClientPublicExecutor_4] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B187463310003, offsetMsgId=AC1B600100002A9F0000000000009C99, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=0]
2025-03-05 17:58:00.756 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_3] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40121,"count":1}]...
2025-03-05 17:58:00.757 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 17:58:00.757 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40121(Long)
2025-03-05 17:58:00.764 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:07:51.921 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:07:51.921 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40119,\"type\":1,\"createTime\":\"2025-03-05 18:07:51\"}"]
2025-03-05 18:07:51.921 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40119,"count":1}]
2025-03-05 18:07:51.925 [NettyClientPublicExecutor_5] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B187D68740004, offsetMsgId=AC1B600100002A9F0000000000009F3E, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=0]
2025-03-05 18:07:51.927 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_4] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40119,"count":1}]...
2025-03-05 18:07:51.928 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:07:51.928 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40119(Long)
2025-03-05 18:07:51.936 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:11:36.969 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 18:11:36.974 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895791464059764794}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 18:11:36.975 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 18:11:36.976 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895791464059764794(Long)
2025-03-05 18:11:36.978 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 18:11:36.979 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895791464059764794,"likeTotal":0,"collectTotal":0,"commentTotal":4}} =================================== 
2025-03-05 18:11:36.981 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 18:11:44.331 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:11:44.331 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40044,\"type\":1,\"createTime\":\"2025-03-05 18:11:43\"}"]
2025-03-05 18:11:44.331 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40044,"count":1}]
2025-03-05 18:11:44.336 [NettyClientPublicExecutor_6] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1880F44F0005, offsetMsgId=AC1B600100002A9F000000000000A1E3, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=2]
2025-03-05 18:11:44.336 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_5] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40044,"count":1}]...
2025-03-05 18:11:44.336 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:11:44.338 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40044(Long)
2025-03-05 18:11:44.350 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:11:54.424 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:11:54.424 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40044,\"type\":0,\"createTime\":\"2025-03-05 18:11:53\"}"]
2025-03-05 18:11:54.424 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40044,"count":-1}]
2025-03-05 18:11:54.428 [NettyClientPublicExecutor_7] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B18811BBB0006, offsetMsgId=AC1B600100002A9F000000000000A48A, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=3]
2025-03-05 18:11:54.429 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_6] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40044,"count":-1}]...
2025-03-05 18:11:54.429 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:11:54.430 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: -1(Integer), 40044(Long)
2025-03-05 18:11:54.441 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:12:00.492 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:12:00.492 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40044,\"type\":1,\"createTime\":\"2025-03-05 18:11:59\"}"]
2025-03-05 18:12:00.492 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40044,"count":1}]
2025-03-05 18:12:00.496 [NettyClientPublicExecutor_8] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1881336F0007, offsetMsgId=AC1B600100002A9F000000000000A730, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=1]
2025-03-05 18:12:00.497 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_7] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40044,"count":1}]...
2025-03-05 18:12:00.498 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:12:00.498 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40044(Long)
2025-03-05 18:12:00.508 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:12:12.602 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:12:12.602 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40044,\"type\":0,\"createTime\":\"2025-03-05 18:12:12\"}"]
2025-03-05 18:12:12.602 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40044,"count":-1}]
2025-03-05 18:12:12.606 [NettyClientPublicExecutor_9] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B188162BD0008, offsetMsgId=AC1B600100002A9F000000000000A9D7, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=4]
2025-03-05 18:12:12.606 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_8] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40044,"count":-1}]...
2025-03-05 18:12:12.607 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:12:12.607 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: -1(Integer), 40044(Long)
2025-03-05 18:12:12.615 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:18:28.451 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:18:28.451 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40043,\"type\":1,\"createTime\":\"2025-03-05 18:18:28\"}"]
2025-03-05 18:18:28.451 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40043,"count":1}]
2025-03-05 18:18:28.455 [NettyClientPublicExecutor_10] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B18871EE60009, offsetMsgId=AC1B600100002A9F000000000000AC7D, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=2], queueOffset=0]
2025-03-05 18:18:28.457 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_9] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40043,"count":1}]...
2025-03-05 18:18:28.458 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:18:28.458 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40043(Long)
2025-03-05 18:18:28.466 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:18:32.205 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 18:18:32.209 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895793656292442205}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 18:18:32.209 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 18:18:32.209 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895793656292442205(Long)
2025-03-05 18:18:32.211 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 18:18:32.211 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895793656292442205,"likeTotal":0,"collectTotal":0,"commentTotal":2}} =================================== 
2025-03-05 18:18:32.213 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 18:18:33.495 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:18:33.495 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40027,\"type\":1,\"createTime\":\"2025-03-05 18:18:33\"}"]
2025-03-05 18:18:33.496 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40027,"count":1}]
2025-03-05 18:18:33.500 [NettyClientPublicExecutor_11] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1887329A000A, offsetMsgId=AC1B600100002A9F000000000000AF22, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=1]
2025-03-05 18:18:33.501 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_10] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40027,"count":1}]...
2025-03-05 18:18:33.501 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:18:33.501 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40027(Long)
2025-03-05 18:18:33.510 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:18:46.721 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 18:18:46.722 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895792506252034080}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 18:18:46.722 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 18:18:46.722 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895792506252034080(Long)
2025-03-05 18:18:46.727 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 18:18:46.727 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895792506252034080,"likeTotal":0,"collectTotal":0,"commentTotal":7}} =================================== 
2025-03-05 18:18:46.728 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 18:18:48.650 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, size: 1
2025-03-05 18:18:48.650 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【评论点赞数】聚合消息, ["{\"userId\":2100,\"commentId\":40046,\"type\":1,\"createTime\":\"2025-03-05 18:18:48\"}"]
2025-03-05 18:18:48.650 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ## 【评论点赞数】聚合后的计数数据: [{"commentId":40046,"count":1}]
2025-03-05 18:18:48.655 [NettyClientPublicExecutor_12] INFO  c.q.x.count.biz.consumer.CountCommentLikeConsumer - ==> 【计数服务：评论点赞数写库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B18876DCE000B, offsetMsgId=AC1B600100002A9F000000000000B1C7, messageQueue=MessageQueue [topic=CountCommentLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=2]
2025-03-05 18:18:48.656 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_11] INFO  c.q.x.c.biz.consumer.CountCommentLike2DBConsumer - ## 消费到了 MQ 【计数: 评论点赞数入库】, [{"commentId":40046,"count":1}]...
2025-03-05 18:18:48.657 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==>  Preparing: update t_comment set like_total = like_total + ?, update_time = now() where id = ?
2025-03-05 18:18:48.658 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - ==> Parameters: 1(Integer), 40046(Long)
2025-03-05 18:18:48.666 [ConsumeMessageThread_xiaohashu_group_CountCommentLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.C.updateLikeTotalByCommentId - <==    Updates: 1
2025-03-05 18:49:43.646 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 18:49:43.646 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895794402190688291,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 18:48:35\"}"]
2025-03-05 18:49:43.652 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895794402190688291,"count":1}]
2025-03-05 18:49:43.658 [NettyClientPublicExecutor_13] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B18A3BBE8000C, offsetMsgId=AC1B600100002A9F000000000000B604, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=2], queueOffset=0]
2025-03-05 18:50:22.701 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895794402190688291,"count":1}]...
2025-03-05 18:50:22.718 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 18:50:22.719 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895794402190688291(Long), 1(Integer), 1(Integer)
2025-03-05 18:50:22.721 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 18:50:22.723 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 18:50:22.723 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 18:50:22.725 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 20:19:23.012 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 101
2025-03-05 20:19:23.037 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:19:23.053 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:19:23.057 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 20:19:23.060 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:19:23.060 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 23ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 20:19:23.069 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 101
2025-03-05 20:19:49.151 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:19:49.153 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:19:49.153 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:19:49.153 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 20:19:49.155 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:19:49.155 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 20:19:49.155 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:19:52.092 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 20:19:52.092 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795420446064640,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 20:19:50\"}"]
2025-03-05 20:19:52.093 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795420446064640,"count":1}]
2025-03-05 20:19:52.106 [NettyClientPublicExecutor_14] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B18F642A8000D, offsetMsgId=AC1B600100002A9F000000000000BA5A, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=0]
2025-03-05 20:19:52.107 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795420446064640,"count":1}]...
2025-03-05 20:19:52.110 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 20:19:52.111 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 20:19:52.113 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 20:19:52.114 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 20:19:52.114 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 20:19:52.116 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 20:19:53.537 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:19:53.537 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:19:53.538 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:19:53.538 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 20:19:53.539 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:19:53.539 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":1,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 20:19:53.540 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:15.370 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:15.372 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794954152706064}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:15.372 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:15.372 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794954152706064(Long)
2025-03-05 20:20:15.374 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:15.374 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794954152706064,"likeTotal":0,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 20:20:15.375 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:17.356 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 20:20:17.356 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895794954152706064,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 20:20:17\"}"]
2025-03-05 20:20:17.357 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895794954152706064,"count":1}]
2025-03-05 20:20:17.361 [NettyClientPublicExecutor_15] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B18F6A54F000E, offsetMsgId=AC1B600100002A9F000000000000BEB0, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=0]
2025-03-05 20:20:17.362 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895794954152706064,"count":1}]...
2025-03-05 20:20:17.363 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 20:20:17.363 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895794954152706064(Long), 1(Integer), 1(Integer)
2025-03-05 20:20:17.365 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 20:20:17.365 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 20:20:17.366 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 20:20:17.367 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 20:20:20.632 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:20.633 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794954152706064}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:20.633 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:20.633 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794954152706064(Long)
2025-03-05 20:20:20.635 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:20.636 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794954152706064,"likeTotal":1,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 20:20:20.636 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:22.771 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 101
2025-03-05 20:20:22.772 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:22.773 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:22.773 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 20:20:22.775 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:22.775 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":1,"collectTotal":0,"commentTotal":6}} =================================== 
2025-03-05 20:20:22.776 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 101
2025-03-05 20:20:25.987 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:25.988 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895793656292442205}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:25.988 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:25.989 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895793656292442205(Long)
2025-03-05 20:20:25.990 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:25.991 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895793656292442205,"likeTotal":0,"collectTotal":0,"commentTotal":2}} =================================== 
2025-03-05 20:20:25.991 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:28.533 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:28.534 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895792506252034080}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:28.534 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:28.535 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895792506252034080(Long)
2025-03-05 20:20:28.536 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:28.536 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895792506252034080,"likeTotal":0,"collectTotal":0,"commentTotal":7}} =================================== 
2025-03-05 20:20:28.536 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:31.476 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 20:20:31.476 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895792506252034080,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 20:20:30\"}"]
2025-03-05 20:20:31.477 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895792506252034080,"count":1}]
2025-03-05 20:20:31.480 [NettyClientPublicExecutor_16] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B18F6DC78000F, offsetMsgId=AC1B600100002A9F000000000000C306, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=1]
2025-03-05 20:20:31.481 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895792506252034080,"count":1}]...
2025-03-05 20:20:31.482 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 20:20:31.482 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895792506252034080(Long), 1(Integer), 1(Integer)
2025-03-05 20:20:31.484 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 20:20:31.484 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 20:20:31.484 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 20:20:31.485 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 20:20:32.436 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:32.437 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895792506252034080}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:32.437 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:32.437 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895792506252034080(Long)
2025-03-05 20:20:32.438 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:32.439 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895792506252034080,"likeTotal":1,"collectTotal":0,"commentTotal":7}} =================================== 
2025-03-05 20:20:32.439 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:35.168 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:35.168 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895791464059764794}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:35.169 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:35.169 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895791464059764794(Long)
2025-03-05 20:20:35.170 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:35.170 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895791464059764794,"likeTotal":0,"collectTotal":0,"commentTotal":4}} =================================== 
2025-03-05 20:20:35.172 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:37.143 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:37.144 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:37.144 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:37.144 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 20:20:37.146 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:37.146 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":1,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 20:20:37.146 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:40.545 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:40.545 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:40.545 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:40.545 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 20:20:40.548 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:40.548 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":1,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 20:20:40.548 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:42.641 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:42.642 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:42.642 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:42.643 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 20:20:42.644 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:42.645 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":0,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 20:20:42.645 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:44.395 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:44.395 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794954152706064}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:44.396 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:44.396 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794954152706064(Long)
2025-03-05 20:20:44.397 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:44.398 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794954152706064,"likeTotal":1,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 20:20:44.398 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:47.283 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:47.284 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:47.284 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:47.285 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 20:20:47.287 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:47.287 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":1,"collectTotal":0,"commentTotal":6}} =================================== 
2025-03-05 20:20:47.288 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:49.863 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:49.864 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895793656292442205}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:49.864 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:49.864 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895793656292442205(Long)
2025-03-05 20:20:49.868 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:49.868 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895793656292442205,"likeTotal":0,"collectTotal":0,"commentTotal":2}} =================================== 
2025-03-05 20:20:49.869 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:20:56.199 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:20:56.199 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:20:56.200 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:20:56.200 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 20:20:56.202 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:20:56.202 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":0,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 20:20:56.203 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:35:36.645 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:35:36.646 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:35:36.647 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:35:36.648 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 20:35:36.650 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:35:36.651 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 6ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":1,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 20:35:36.651 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 20:36:32.520 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 20:36:32.521 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 20:36:32.521 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 20:36:32.522 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 20:36:32.523 [http-nio-8090-exec-5] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 20:36:32.523 [http-nio-8090-exec-5] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":1,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 20:36:32.524 [http-nio-8090-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:03:32.435 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:03:32.436 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895793656292442205}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:03:32.448 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:03:32.449 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895793656292442205(Long)
2025-03-05 21:03:32.451 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:03:32.451 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 15ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895793656292442205,"likeTotal":0,"collectTotal":0,"commentTotal":2}} =================================== 
2025-03-05 21:03:32.452 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:03:41.593 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:03:41.593 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895793656292442205,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:03:40\"}"]
2025-03-05 21:03:41.595 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895793656292442205,"count":1}]
2025-03-05 21:03:41.606 [NettyClientPublicExecutor_17] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B191E62240010, offsetMsgId=AC1B600100002A9F000000000000C75C, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=0]
2025-03-05 21:03:41.608 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_5] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895793656292442205,"count":1}]...
2025-03-05 21:03:41.610 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:03:41.611 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895793656292442205(Long), 1(Integer), 1(Integer)
2025-03-05 21:03:41.613 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:03:41.614 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:03:41.615 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:03:41.617 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:03:45.070 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:03:45.071 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:03:45.071 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:03:45.071 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 21:03:45.073 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:03:45.073 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":0,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 21:03:45.074 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:03:46.986 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:03:46.987 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:03:46.987 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:03:46.987 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 21:03:46.989 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:03:46.989 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":1,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 21:03:46.990 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:03:52.714 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:03:52.714 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795420446064640,\"type\":0,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:03:52\"}"]
2025-03-05 21:03:52.714 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795420446064640,"count":-1}]
2025-03-05 21:03:52.720 [NettyClientPublicExecutor_18] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B191E8D8E0011, offsetMsgId=AC1B600100002A9F000000000000CBB4, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=1]
2025-03-05 21:03:52.721 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_6] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795420446064640,"count":-1}]...
2025-03-05 21:03:52.722 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:03:52.723 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795420446064640(Long), -1(Integer), -1(Integer)
2025-03-05 21:03:52.724 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:03:52.724 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:03:52.725 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), -1(Integer), -1(Integer)
2025-03-05 21:03:52.726 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_6] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:04:46.938 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:04:46.938 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:04:46.938 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:04:46.939 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 21:04:46.940 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:04:46.941 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":0,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 21:04:46.941 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:06:46.067 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:06:46.068 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:06:46.069 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:06:46.069 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 21:06:46.071 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:06:46.071 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":0,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 21:06:46.071 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:06:49.595 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:06:49.595 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:06:49\"}"]
2025-03-05 21:06:49.595 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]
2025-03-05 21:06:49.599 [NettyClientPublicExecutor_19] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1921407E0012, offsetMsgId=AC1B600100002A9F000000000000D00B, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=2]
2025-03-05 21:06:49.599 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_7] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]...
2025-03-05 21:06:49.601 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:06:49.601 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 21:06:49.603 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:06:49.605 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:06:49.605 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:06:49.607 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_7] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:06:55.653 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:06:55.653 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":0,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:06:55\"}"]
2025-03-05 21:06:55.654 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]
2025-03-05 21:06:55.664 [NettyClientPublicExecutor_20] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1921582F0013, offsetMsgId=AC1B600100002A9F000000000000D463, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=1]
2025-03-05 21:06:55.665 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_8] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]...
2025-03-05 21:06:55.666 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:06:55.667 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), -1(Integer), -1(Integer)
2025-03-05 21:06:55.669 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:06:55.669 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:06:55.670 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), -1(Integer), -1(Integer)
2025-03-05 21:06:55.672 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_8] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:06:56.666 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:06:56.666 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:06:56\"}"]
2025-03-05 21:06:56.667 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]
2025-03-05 21:06:56.672 [NettyClientPublicExecutor_21] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B19215C1E0014, offsetMsgId=AC1B600100002A9F000000000000D8BA, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=2], queueOffset=1]
2025-03-05 21:06:56.673 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_9] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]...
2025-03-05 21:06:56.674 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:06:56.674 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 21:06:56.676 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:06:56.677 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:06:56.677 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:06:56.678 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_9] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:08:08.413 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:08:08.413 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":0,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:08:08\"}"]
2025-03-05 21:08:08.413 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]
2025-03-05 21:08:08.417 [NettyClientPublicExecutor_22] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B192274600015, offsetMsgId=AC1B600100002A9F000000000000DD12, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=3]
2025-03-05 21:08:08.418 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_10] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]...
2025-03-05 21:08:08.420 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:08:08.421 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), -1(Integer), -1(Integer)
2025-03-05 21:08:08.422 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:08:08.422 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:08:08.423 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), -1(Integer), -1(Integer)
2025-03-05 21:08:08.424 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_10] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:08:09.421 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:08:09.421 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:08:09\"}"]
2025-03-05 21:08:09.421 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]
2025-03-05 21:08:09.427 [NettyClientPublicExecutor_23] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B192278520016, offsetMsgId=AC1B600100002A9F000000000000E169, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=4]
2025-03-05 21:08:09.428 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_11] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]...
2025-03-05 21:08:09.429 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:08:09.430 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 21:08:09.432 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:08:09.432 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:08:09.432 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:08:09.434 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_11] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:09:07.019 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 2
2025-03-05 21:09:07.019 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":0,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:09:06\"}","{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:09:06\"}"]
2025-03-05 21:09:07.019 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":0}]
2025-03-05 21:09:07.024 [NettyClientPublicExecutor_24] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1923594F0017, offsetMsgId=AC1B600100002A9F000000000000E8C6, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=5]
2025-03-05 21:09:07.024 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_12] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":0}]...
2025-03-05 21:09:07.025 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_12] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:09:07.026 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_12] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 0(Integer), 0(Integer)
2025-03-05 21:09:07.027 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_12] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 1
2025-03-05 21:09:07.027 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_12] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:09:07.028 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_12] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 0(Integer), 0(Integer)
2025-03-05 21:09:07.030 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_12] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 1
2025-03-05 21:10:33.907 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:10:33.907 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":0,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:10:33\"}"]
2025-03-05 21:10:33.907 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]
2025-03-05 21:10:33.911 [NettyClientPublicExecutor_25] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1924ACB60018, offsetMsgId=AC1B600100002A9F000000000000ED1E, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=2]
2025-03-05 21:10:33.911 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_13] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]...
2025-03-05 21:10:33.912 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_13] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:33.913 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_13] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), -1(Integer), -1(Integer)
2025-03-05 21:10:33.915 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_13] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:10:33.915 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_13] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:33.915 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_13] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), -1(Integer), -1(Integer)
2025-03-05 21:10:33.917 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_13] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:10:36.943 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:10:36.943 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:10:36\"}"]
2025-03-05 21:10:36.943 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]
2025-03-05 21:10:36.947 [NettyClientPublicExecutor_26] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1924B8920019, offsetMsgId=AC1B600100002A9F000000000000F175, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=2]
2025-03-05 21:10:36.948 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_14] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]...
2025-03-05 21:10:36.949 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_14] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:36.950 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_14] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 21:10:36.951 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_14] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:10:36.951 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_14] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:36.951 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_14] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:10:36.953 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_14] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:10:39.967 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:10:39.967 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":0,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:10:39\"}"]
2025-03-05 21:10:39.970 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]
2025-03-05 21:10:39.974 [NettyClientPublicExecutor_27] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1924C465001A, offsetMsgId=AC1B600100002A9F000000000000F5CD, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=3]
2025-03-05 21:10:39.974 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_15] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":-1}]...
2025-03-05 21:10:39.975 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_15] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:39.976 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_15] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), -1(Integer), -1(Integer)
2025-03-05 21:10:39.977 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_15] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:10:39.977 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_15] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:39.977 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_15] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), -1(Integer), -1(Integer)
2025-03-05 21:10:39.978 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_15] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:10:45.013 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:10:45.013 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:10:44\"}"]
2025-03-05 21:10:45.013 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]
2025-03-05 21:10:45.018 [NettyClientPublicExecutor_28] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1924D819001B, offsetMsgId=AC1B600100002A9F000000000000FA24, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=6]
2025-03-05 21:10:45.019 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_16] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]...
2025-03-05 21:10:45.022 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_16] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:45.023 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_16] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 21:10:45.025 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_16] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:10:45.025 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_16] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:10:45.025 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_16] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:10:45.026 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_16] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:10:49.808 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:10:49.809 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:10:49.810 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:10:49.810 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 21:10:49.812 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:10:49.812 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":1,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 21:10:49.812 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:15:41.591 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:15:41.592 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:15:41.593 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:15:41.594 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 21:15:41.596 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:15:41.596 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":1,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 21:15:41.597 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:32:11.471 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:32:11.472 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:32:11.480 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:32:11.480 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 21:32:11.482 [http-nio-8090-exec-9] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:32:11.482 [http-nio-8090-exec-9] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 10ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":1,"collectTotal":0,"commentTotal":6}} =================================== 
2025-03-05 21:32:11.482 [http-nio-8090-exec-9] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:32:20.816 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:32:20.817 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:32:20.817 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:32:20.818 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 21:32:20.820 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:32:20.820 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":1,"collectTotal":0,"commentTotal":6}} =================================== 
2025-03-05 21:32:20.820 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:33:26.596 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-03-05 21:33:26.596 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":2100,\"noteId\":1895794402190688291,\"type\":1,\"createTime\":\"2025-03-05 21:32:15\",\"noteCreatorId\":2100}"]
2025-03-05 21:33:26.606 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895794402190688291,"count":1}]
2025-03-05 21:33:26.613 [NettyClientPublicExecutor_1] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B19399ED3001C, offsetMsgId=AC1B600100002A9F000000000000FE86, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=SK-20231010EQPS, queueId=2], queueOffset=0]
2025-03-05 21:33:45.595 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, [{"creatorId":2100,"noteId":1895794402190688291,"count":1}]...
2025-03-05 21:33:45.599 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:33:45.599 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1895794402190688291(Long), 1(Integer), 1(Integer)
2025-03-05 21:33:45.600 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-03-05 21:33:45.601 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:33:45.601 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:33:45.603 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_1] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - <==    Updates: 2
2025-03-05 21:34:52.001 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:34:52.002 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:34:52.003 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:34:52.004 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 21:34:52.005 [http-nio-8090-exec-2] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:34:52.006 [http-nio-8090-exec-2] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":1,"collectTotal":1,"commentTotal":6}} =================================== 
2025-03-05 21:34:52.006 [http-nio-8090-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:34:55.168 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:34:55.169 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:34:55.169 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:34:55.169 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 21:34:55.170 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:34:55.171 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":1,"collectTotal":1,"commentTotal":6}} =================================== 
2025-03-05 21:34:55.171 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:35:01.264 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:35:01.265 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895791464059764794}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:35:01.265 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:35:01.265 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895791464059764794(Long)
2025-03-05 21:35:01.266 [http-nio-8090-exec-7] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:35:01.266 [http-nio-8090-exec-7] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 1ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895791464059764794,"likeTotal":0,"collectTotal":0,"commentTotal":4}} =================================== 
2025-03-05 21:35:01.267 [http-nio-8090-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:35:51.206 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:35:51.207 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895793656292442205}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:35:51.207 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:35:51.207 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895793656292442205(Long)
2025-03-05 21:35:51.209 [http-nio-8090-exec-6] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:35:51.209 [http-nio-8090-exec-6] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895793656292442205,"likeTotal":1,"collectTotal":0,"commentTotal":2}} =================================== 
2025-03-05 21:35:51.209 [http-nio-8090-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:35:56.831 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-03-05 21:35:56.831 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":2100,\"noteId\":1895793656292442205,\"type\":1,\"createTime\":\"2025-03-05 21:35:56\",\"noteCreatorId\":2100}"]
2025-03-05 21:35:56.831 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895793656292442205,"count":1}]
2025-03-05 21:35:56.835 [NettyClientPublicExecutor_2] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B193BE9A2001D, offsetMsgId=AC1B600100002A9F00000000000102EB, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=SK-20231010EQPS, queueId=0], queueOffset=0]
2025-03-05 21:35:56.836 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, [{"creatorId":2100,"noteId":1895793656292442205,"count":1}]...
2025-03-05 21:35:56.838 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:35:56.838 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1895793656292442205(Long), 1(Integer), 1(Integer)
2025-03-05 21:35:56.840 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-03-05 21:35:56.840 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:35:56.840 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:35:56.842 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_2] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - <==    Updates: 2
2025-03-05 21:47:13.666 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:47:13.667 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:47:13.668 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:47:13.669 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 21:47:13.670 [http-nio-8090-exec-4] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:47:13.670 [http-nio-8090-exec-4] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":0,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 21:47:13.671 [http-nio-8090-exec-4] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:47:17.150 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, size: 1
2025-03-05 21:47:17.150 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【笔记点赞数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795420446064640,\"type\":1,\"noteCreatorId\":2100,\"createTime\":\"2025-03-05 21:47:16\"}"]
2025-03-05 21:47:17.150 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ## 【笔记点赞数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795420446064640,"count":1}]
2025-03-05 21:47:17.154 [NettyClientPublicExecutor_3] INFO  c.q.x.count.biz.consumer.CountNoteLikeConsumer - ==> 【计数服务：笔记点赞数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B19464B21001E, offsetMsgId=AC1B600100002A9F0000000000010744, messageQueue=MessageQueue [topic=CountNoteLike2DBTTopic, brokerName=SK-20231010EQPS, queueId=3], queueOffset=3]
2025-03-05 21:47:17.155 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_17] INFO  c.q.x.count.biz.consumer.CountNoteLike2DBConsumer - ## 消费到了 MQ 【计数: 笔记点赞数入库】, [{"creatorId":2100,"noteId":1895795420446064640,"count":1}]...
2025-03-05 21:47:17.156 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_17] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:47:17.156 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_17] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 21:47:17.158 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_17] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateLikeTotalByNoteId - <==    Updates: 2
2025-03-05 21:47:17.158 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_17] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, like_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE like_total = like_total + (?);
2025-03-05 21:47:17.159 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_17] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:47:17.160 [ConsumeMessageThread_xiaohashu_group_CountNoteLike2DBTTopic_17] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateLikeTotalByUserId - <==    Updates: 2
2025-03-05 21:47:21.709 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:47:21.710 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795420446064640}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:47:21.710 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:47:21.710 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795420446064640(Long)
2025-03-05 21:47:21.712 [http-nio-8090-exec-8] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:47:21.712 [http-nio-8090-exec-8] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 2ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795420446064640,"likeTotal":1,"collectTotal":0,"commentTotal":5}} =================================== 
2025-03-05 21:47:21.712 [http-nio-8090-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:47:24.418 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-03-05 21:47:24.418 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795420446064640,\"type\":1,\"createTime\":\"2025-03-05 21:47:23\",\"noteCreatorId\":2100}"]
2025-03-05 21:47:24.418 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795420446064640,"count":1}]
2025-03-05 21:47:24.422 [NettyClientPublicExecutor_4] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B19466785001F, offsetMsgId=AC1B600100002A9F0000000000010BA6, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=0]
2025-03-05 21:47:24.423 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, [{"creatorId":2100,"noteId":1895795420446064640,"count":1}]...
2025-03-05 21:47:24.424 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:47:24.424 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1895795420446064640(Long), 1(Integer), 1(Integer)
2025-03-05 21:47:24.426 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-03-05 21:47:24.426 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:47:24.426 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:47:24.428 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_3] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - <==    Updates: 2
2025-03-05 21:49:29.613 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:49:29.613 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895795185766367284}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:49:29.615 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:49:29.615 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895795185766367284(Long)
2025-03-05 21:49:29.617 [http-nio-8090-exec-10] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:49:29.617 [http-nio-8090-exec-10] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 4ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895795185766367284,"likeTotal":1,"collectTotal":0,"commentTotal":62}} =================================== 
2025-03-05 21:49:29.618 [http-nio-8090-exec-10] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:49:31.545 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-03-05 21:49:31.545 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":2100,\"noteId\":1895795185766367284,\"type\":1,\"createTime\":\"2025-03-05 21:49:30\",\"noteCreatorId\":2100}"]
2025-03-05 21:49:31.545 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]
2025-03-05 21:49:31.550 [NettyClientPublicExecutor_5] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B1948581D0020, offsetMsgId=AC1B600100002A9F000000000001100B, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=1]
2025-03-05 21:49:31.552 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_4] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, [{"creatorId":2100,"noteId":1895795185766367284,"count":1}]...
2025-03-05 21:49:31.553 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:49:31.554 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1895795185766367284(Long), 1(Integer), 1(Integer)
2025-03-05 21:49:31.555 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_4] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-03-05 21:49:31.555 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:49:31.555 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:49:31.557 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_4] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - <==    Updates: 2
2025-03-05 21:49:35.067 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 21:49:35.068 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794954152706064}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 21:49:35.068 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 21:49:35.068 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794954152706064(Long)
2025-03-05 21:49:35.070 [http-nio-8090-exec-1] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 21:49:35.071 [http-nio-8090-exec-1] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 3ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794954152706064,"likeTotal":1,"collectTotal":0,"commentTotal":1}} =================================== 
2025-03-05 21:49:35.071 [http-nio-8090-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
2025-03-05 21:49:36.591 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, size: 1
2025-03-05 21:49:36.591 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【笔记收藏数】聚合消息, ["{\"userId\":2100,\"noteId\":1895794954152706064,\"type\":1,\"createTime\":\"2025-03-05 21:49:36\",\"noteCreatorId\":2100}"]
2025-03-05 21:49:36.591 [pool-batch-consume-blocking-queue-thread-0] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ## 【笔记收藏数】聚合后的计数数据: [{"creatorId":2100,"noteId":1895794954152706064,"count":1}]
2025-03-05 21:49:36.596 [NettyClientPublicExecutor_6] INFO  c.q.x.count.biz.consumer.CountNoteCollectConsumer - ==> 【计数服务：笔记收藏数入库】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000184AC63947C6B19486BD30021, offsetMsgId=AC1B600100002A9F0000000000011470, messageQueue=MessageQueue [topic=CountNoteCollect2DBTTopic, brokerName=SK-20231010EQPS, queueId=1], queueOffset=2]
2025-03-05 21:49:36.597 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_5] INFO  c.q.x.c.biz.consumer.CountNoteCollect2DBConsumer - ## 消费到了 MQ 【计数: 笔记收藏数入库】, [{"creatorId":2100,"noteId":1895794954152706064,"count":1}]...
2025-03-05 21:49:36.598 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_5] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==>  Preparing: INSERT INTO t_note_count (note_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:49:36.598 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_5] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - ==> Parameters: 1895794954152706064(Long), 1(Integer), 1(Integer)
2025-03-05 21:49:36.600 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_5] DEBUG c.q.x.c.b.d.m.N.insertOrUpdateCollectTotalByNoteId - <==    Updates: 2
2025-03-05 21:49:36.601 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==>  Preparing: INSERT INTO t_user_count (user_id, collect_total) VALUES (?, ?) ON DUPLICATE KEY UPDATE collect_total = collect_total + (?);
2025-03-05 21:49:36.601 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - ==> Parameters: 2100(Long), 1(Integer), 1(Integer)
2025-03-05 21:49:36.602 [ConsumeMessageThread_xiaohashu_group_CountNoteCollect2DBTTopic_5] DEBUG c.q.x.c.b.d.m.U.insertOrUpdateCollectTotalByUserId - <==    Updates: 2
2025-03-05 22:11:08.906 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2100
2025-03-05 22:11:08.906 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [获取笔记计数数据], 入参: {"noteId":1895794402190688291}, 请求类: NoteCountController, 请求方法: findNoteCountData =================================== 
2025-03-05 22:11:08.918 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==>  Preparing: select note_id, like_total, collect_total, comment_total from t_note_count where note_id = ?
2025-03-05 22:11:08.918 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - ==> Parameters: 1895794402190688291(Long)
2025-03-05 22:11:08.919 [http-nio-8090-exec-3] DEBUG c.q.x.c.b.d.m.NoteCountDOMapper.selectByNoteId - <==      Total: 1
2025-03-05 22:11:08.919 [http-nio-8090-exec-3] INFO  c.q.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [获取笔记计数数据], 耗时: 13ms, 出参: {"success":true,"message":null,"errorCode":null,"data":{"noteId":1895794402190688291,"likeTotal":1,"collectTotal":1,"commentTotal":6}} =================================== 
2025-03-05 22:11:08.920 [http-nio-8090-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2100
